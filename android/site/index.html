<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">

	<title>Locarta Android SDK Documentation</title>

        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            

            <!-- Main title -->
            <a class="navbar-brand" href=".">Locarta Android SDK Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#locarta-android-sdk">Locarta Android SDK</a></li>
        
            <li><a href="#setup">Setup</a></li>
        
            <li><a href="#integration-information">Integration information</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="locarta-android-sdk">Locarta Android SDK</h1>
<table>
<thead>
<tr>
<th>Latest Version</th>
<th>Size</th>
<th>Minimal Android API verison</th>
<th>Release Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>143.be90ae4</td>
<td>400 KB</td>
<td>9 (2.3  Gingerbeard)</td>
<td>03/08/2016</td>
</tr>
</tbody>
</table>
<h2 id="setup">Setup</h2>
<hr />
<h3 id="declare-dependencies">Declare dependencies</h3>
<p>To add the Locarta Sdk dependency open <code>build.gradle</code> file of your project and update the repositories and dependencies blocks as follows:</p>
<pre><code class="gradle">     repositories {
     // ... other project repositories
     maven { url &quot;https://repo.pointwise.co/nexus/content/repositories/pointwise&quot; }
     // Repository will be provided separately 
     }
     // ...
     dependencies {
        // ... other project dependencies
        compile (&quot;co.locarta.sdk:&lt;LocartaSdkVersion&gt;:pubProd@aar&quot;) {
            transitive = true;
        }
     }
</code></pre>

<p>where "LocartaSdkVersion" is actual Locarta SDK version
Sync build.gradle, rebuild your project and import <code>co.locarta.sdk.LocartaSDK</code> into your app.</p>
<h3 id="set-publisher-key">Set Publisher Key</h3>
<p>Add <meta-data> tag to AndroidManifest.xml of your project</p>
<pre><code class="xml">    &lt;application&gt;
        &lt;!-- other content --&gt;
        &lt;meta-data android:name=&quot;co.locarta.sdk.pid&quot; android:value=&quot;&lt;YOUR PUBLISHER KEY&gt;&quot;/&gt;        
    &lt;/application&gt;
</code></pre>

<p>where PublisherKey is your Publisher Key.</p>
<h4 id="initialise-sdk">Initialise SDK</h4>
<p>You need to initialise Locarta SDK only once on the startup</p>
<pre><code class="java">    // Add this line to the header of your file
    import co.locarta.sdk.LocartaSdk;
    public class SdkDemoApplication extends Application {
        @Override
        public void onCreate() {
            super.onCreate();
            // Initialise SDK on App creation
            LocartaSdk.initialize(getApplicationContext());
        }
    }
</code></pre>

<h3 id="user-opt-in">User opt-in</h3>
<p>User has to opt-in into marketing research program for the SDK to start working.</p>
<p>This can be done either via embed dialog:</p>
<pre><code class="java">    // Put this code somewhere in the main activities
    LocartaSdk.showAgreementDialog(this);
</code></pre>

<p>Or it can be done via API call if a host application has own accept dialog or compliant terms and conditions:</p>
<pre><code class="java">    LocartaSDK.setTermsAccepted(true);
</code></pre>

<p>If you want to check the status of accepted terms, call:</p>
<pre><code class="java">    // The call returns true or false if user accepted terms or not
    LocartaSDK.getTermsAccepted();        
</code></pre>

<p>If you want to stop SDK for whatever reason:</p>
<pre><code class="java">   LocartaSdk.stop(context);
</code></pre>

<h2 id="integration-information">Integration information</h2>
<hr />
<p>By default the host app <strong>should not</strong> be setting any additional permissions in it's manifest.</p>
<p>The set of minimal permissions embedded in the Locarta SDK:</p>
<table>
<thead>
<tr>
<th>Permission Name</th>
<th>Plain English Name in App</th>
<th>Plain German Name in App</th>
</tr>
</thead>
<tbody>
<tr>
<td>android.permission.INTERNET</td>
<td>Full Network Access</td>
<td>Zugriff auf alle Netzwerke</td>
</tr>
<tr>
<td>android.permission.ACCESS_COARSE_LOCATION</td>
<td>Approximate Location</td>
<td>Ungef√§hrer Standort</td>
</tr>
<tr>
<td>android.permission.ACCESS_FINE_LOCATION</td>
<td>Precise Location</td>
<td>Genauer Standort</td>
</tr>
<tr>
<td>android.permission.ACCESS_NETWORK_STATE</td>
<td>View Network Connections</td>
<td>Netzwerkverbindungen abrufen</td>
</tr>
<tr>
<td>android.permission.ACCESS_WIFI_STATE</td>
<td>View Wifi Connections</td>
<td>WLAN-Verbindungen abrufen</td>
</tr>
</tbody>
</table>
<h3 id="proguard">Proguard</h3>
<p>We already configured proguard rules for the Locarta SDK. No addtional steps has to be done in the host application</p>
<h3 id="performance-impact">Performance impact</h3>
<p>We expect a battery impact of roughly 2% (adjustable).</p>
<p>Normally we use about 1MB/week of mobile data, but this also depends on how often you connect to wifi.</p>
<h3 id="3rd-party-dependencies">3rd party dependencies</h3>
<p>Since we ask you to integrate Locarta SDK as transitive @aar dependeny, we'd like to provide a list of 3rd party dependencies we use.</p>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>com.google.android.gms:play-services-location</td>
<td>9.4.0</td>
</tr>
<tr>
<td>com.google.android.gms:play-services-gcm</td>
<td>9.4.0</td>
</tr>
<tr>
<td>com.android.support:appcompat-v7</td>
<td>24.1.1</td>
</tr>
<tr>
<td>com.google.code.gson:gson</td>
<td>2.7</td>
</tr>
<tr>
<td>com.squareup.retrofit2:retrofit</td>
<td>2.1.0</td>
</tr>
<tr>
<td>com.squareup.retrofit2:converter-gson</td>
<td>2.1.0</td>
</tr>
<tr>
<td>de.greenrobot:eventbus</td>
<td>3.0.0</td>
</tr>
<tr>
<td>com.google.dagger:dagger</td>
<td>2.0</td>
</tr>
<tr>
<td>ch.hsr:geohash</td>
<td>1.0.13</td>
</tr>
<tr>
<td>com.google.protobuf</td>
<td>2.6.1</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="proguard_1">Proguard</h4>
<p>If you see the message: _Can't find referenced class from the SDK  </p>
<p>Add these lines to your proguard configuration: </p>
<pre><code>-dontwarn co.pointwise.proto.JournalProto$.**
-dontwarn com.google.common.base.Function
-dontwarn com.google.common.collect.Lists
</code></pre>

<h4 id="downgrading-min-skd-version-to-api-v7">Downgrading min. skd version to API v7.</h4>
<p>Technically SDK minimum version is 7 already.</p>
<p>But it depends on Google Play services with minimum version 9. </p>
<p>If you get an error saying: </p>
<pre><code>Manifest merger failed : uses-sdk:minSdkVersion 7 cannot be smaller than version 9 declared in library [com.google.android.gms:play-services-location:9.4.0] Suggestion: use tools:overrideLibrary=&quot;com.google.android.gms&quot; to force usage
</code></pre>

<p>Than add this line to the manifest of your applicaiton: </p>
<pre><code class="xml">&lt;uses-sdk tools:overrideLibrary=&quot;com.google.android.gms, com.google.android.gms.base, com.google.android.gms.tasks, com.google.android.gms.gcm, com.google.android.gms.iid&quot;/&gt;
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>

<!--
MkDocs version : 0.15.3
Build Date UTC : 2016-08-08 15:12:39.232382
-->
